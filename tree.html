<head>
  <title>TreeLand</title>
</head>

<body>
  {{> navigation}}
  <div class="container">
    <header>
      <h1>Hi, {{currentUser.username}}</h1>
    </header>

    {{> application}}
  </div>
</body>

<template name="application">
  <div class="container">
    {{#if noStories}}
      <p>Create your root node...</p>
      {{> insertStoryForm}}
    {{/if}}
    {{#each stories}}
      <div class="row">
        {{> story}}
      </div>
    {{/each}}
  </div>
</template>

<template name="navigation">
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">TreeLand</a>
        <p class="navbar-text navbar-right">{{> loginButtons}}</p>
      </div>
    </div>
  </nav>
</template>

<template name="story">
  <div class="story {{sizeClass depth}}">
    <h5>{{title}}</h5>
    <a href="#" class="delete">X</a>
    <div class="clearfix"></div>
    {{> insertStoryForm parentId=_id}}
  </div>
</template>


<template name="insertStoryForm">
  {{#autoForm collection="Stories" id="insertStoryForm" type="insert" class="form-inline"}}
    <div class="form-group">
      {{> afQuickField name='title' label=false class="form-control"}}
    </div>
    {{> afQuickField name='editing' label=false class="form-control" type="hidden" value=true}}
    {{> afQuickField name='depth' label=false class="form-control" type="hidden" value=1}}
    {{> afQuickField name='parentId' label=false class="form-control" type="hidden" value=parentId}}
  {{/autoForm}}
</template>
